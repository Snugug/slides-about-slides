{"version":3,"file":"lazyload.js","sources":["../../node_modules/stage-fright/src/js/lib/lazyload.js"],"sourcesContent":["export function removeLazyLoading(e) {\n  e.target.removeAttribute('data-lazy-loading');\n}\n\nexport function loadImage(elem) {\n  let loading = elem;\n  let load = false;\n\n  if (elem.tagName === 'PICTURE') {\n    const sets = elem.querySelectorAll('[data-srcset]');\n    const srcs = elem.querySelectorAll('[data-src]');\n\n    sets.forEach((set) => {\n      load = true;\n      set.srcset = set.dataset.srcset; // eslint-disable-line no-param-reassign\n      delete set.dataset.srcset; // eslint-disable-line no-param-reassign\n    });\n\n    srcs.forEach((src) => {\n      load = true;\n      src.src = src.dataset.src; // eslint-disable-line no-param-reassign\n      delete src.dataset.src; // eslint-disable-line no-param-reassign\n    });\n  } else if (elem.tagName === 'IMG') {\n    if (elem.dataset.src) {\n      load = true;\n      elem.src = elem.dataset.src; // eslint-disable-line no-param-reassign\n      delete elem.dataset.src; // eslint-disable-line no-param-reassign\n    }\n  }\n\n  if (load) {\n    loading.setAttribute('data-lazy-loading', true);\n    loading.addEventListener('load', removeLazyLoading);\n  }\n}\n\nexport function loadMedia(elem) {\n  let loading = elem;\n  let load = false;\n\n  if (elem.dataset.src) {\n    load = true;\n    loading.src = loading.dataset.src;\n    delete loading.dataset.src;\n  } else {\n    const srcs = elem.querySelectorAll('[data-src]');\n    srcs.forEach((src) => {\n      load = true;\n      src.src = src.dataset.src;\n      delete src.dataset.src;\n    });\n  }\n\n  loading.preload = 'auto';\n\n  if (load) {\n    loading.setAttribute('data-lazy-loading', true);\n    loading.addEventListener('loadeddata', removeLazyLoading);\n  }\n}\n\nexport function loadMultimediaObserver(entries) {\n  entries.forEach((entry) => {\n    if (entry.isIntersecting) {\n      const target = entry.target;\n\n      if (target.tagName === 'IMG' || target.targetName === 'PICTURE') {\n        loadImage(target);  \n      } else {\n        loadMedia(target);\n      }\n    }\n  });\n}\n\nexport default function () {\n  const multimedia = document.querySelectorAll('picture, img, video, audio, iframe');\n\n  if ('IntersectionObserver' in window) {\n    const observer = new IntersectionObserver(loadMultimediaObserver);\n    multimedia.forEach(m => observer.observe(m));\n  } else {\n    multimedia.forEach((m) => {\n      if (m.tagName === 'IMG' || m.tagName === 'PICTURE') {\n        loadImage(m);\n      } else {\n        loadMedia(m)\n      }\n    });\n  }\n}\n"],"names":["removeLazyLoading","e","target","removeAttribute","loadImage","elem","loading","load","tagName","sets","querySelectorAll","srcs","forEach","set","srcset","dataset","src","setAttribute","addEventListener","loadMedia","preload","loadMultimediaObserver","entries","entry","isIntersecting","targetName","multimedia","document","window","observer","IntersectionObserver","m","observe"],"mappings":"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"}